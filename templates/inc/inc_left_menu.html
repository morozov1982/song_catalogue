{% load main_tags %}
<div class="position-fixed col-md-3 col-lg-2 p-3 text-bg-dark h-100 sidebar">
    <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
           data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-box-arrow-in-right fs-3 me-3"></i>
            <strong>
                {% if user.is_authenticated %}
                    {{ user.username }}
                {% else %}
                    Гость
                {% endif %}
            </strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
            <li><a class="dropdown-item" href="/admin/" target="_blank">Админка</a></li>
            <li>
                <hr class="dropdown-divider">
            </li>
            {% if user.is_authenticated %}
                <li><a class="dropdown-item" href="{% url 'logout' %}">Выйти</a></li>
            {% else %}
                <li><a class="dropdown-item" href="{% url 'login' %}?next={{ request.path }}">Войти</a></li>
            {% endif %}
        </ul>
    </div>
    <form action="{% url 'main:search' %}" method="get" class="my-3 mb-lg-0" role="search">
        <input type="search" class="form-control form-control-dark text-bg-secondary border-secondary"
               placeholder="Поиск ..." aria-label="Search" name="q">
    </form>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
            <a href="{% url 'main:index' %}"
                {% if request.resolver_match.route == '' %}
                    class="nav-link active" aria-current="page">
                {% else %}
                    class="nav-link text-white">
                {% endif %}
                <i class="bi bi-house-door me-2"></i>
                Главная
            </a>
        </li>
        <li>
            <a href="{% url 'main:artists' %}"
                {% if request.resolver_match.url_name == 'artist' or request.resolver_match.url_name == 'artists' %}
                    class="nav-link active" aria-current="page">
                {% else %}
                    class="nav-link text-white">
                {% endif %}
                <i class="bi bi-person-lines-fill me-2"></i>
                Артисты
            </a>
        </li>
    </ul>
    <hr>
    <form action="{% url 'main:filter' %}" method="get">
            <h5 class="mt-3">Годы:</h5>
            {% for song in view.get_years %}
                <div class="form-check">
                    <input class="form-check-input text-bg-dark border-secondary" type="checkbox" name="year" value="{{ song.year }}"
                           id="year{{ forloop.counter }}">
                    <label class="form-check-label text-secondary" for="year{{ forloop.counter }}">
                        {{ song.year }}
                    </label>
                </div>
            {% endfor %}
            <h5 class="mt-3">Стили:</h5>
            {% for genre in view.get_genres %}
                <div class="form-check">
                    <input class="form-check-input text-bg-dark border-secondary" type="checkbox" name="genre" value="{{ genre }}"
                           id="genre{{ forloop.counter }}">
                    <label class="form-check-label text-secondary" for="genre{{ forloop.counter }}">
                        {{ genre }}
                    </label>
                </div>
            {% endfor %}
            <button type="submit" class="btn btn-outline-secondary btn-sm me-2 my-3">Отфильтровать
                <i class="bi bi-funnel fs-6"></i>
            </button>
        
    </form>
    <hr>
    {% get_last_songs count=5 %}
    <hr>
    {% get_last_artists count=5 %}
</div>
